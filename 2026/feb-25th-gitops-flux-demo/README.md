# GitOps en 30 minutos: de cero a flujo real con FluxCD

[![en](https://img.shields.io/badge/lang-en-red.svg)](./README.md)
[![es](https://img.shields.io/badge/lang-es-yellow.svg)](./README-es.md)

## Talk Information

- **Date**: 2026-02-25
- **Event**: Cloud Native Community Meetup
- **Topics**: GitOps, FluxCD, Kubernetes, EKS, Terraform
- **Slides**: [slides.com](https://slides.com/shankyjs_/2026-gitops-en-30-min-con-flux)

## Description

This talk demonstrates how to implement GitOps with FluxCD on AWS EKS. We go from zero to a full PR-to-Production workflow in a single `terraform apply`.

## What You'll Learn

- GitOps fundamentals and the pull-based model
- How FluxCD reconciliation works
- Setting up EKS + Flux with Terraform
- The PR-to-Production workflow without CI pipelines
- Drift detection and self-healing in action

## Demo

### Prerequisites

- AWS CLI configured with credentials
- Terraform >= 1.0
- kubectl
- 1Password CLI (for GitHub PAT)
- GitHub Personal Access Token with repo permissions

### Configuration

All configuration is centralized in `terraform/locals.tf`. Edit this file to customize:

```hcl
locals {
  # General
  project_name = "gitops-flux-demo"
  region       = "us-west-2"

  # EKS
  cluster_name    = "gitops-demo"
  cluster_version = "1.31"

  # GitHub / Flux
  github_owner      = "shankyjs"
  github_repository = "talks"
  flux_path         = "2026/feb-25th-gitops-flux-demo/clusters/gitops-demo"

  # ...
}
```

### Quick Start

```bash
# Navigate to terraform directory
cd 2026/feb-25th-gitops-flux-demo/terraform

# Initialize Terraform
terraform init

# Review the plan
terraform plan

# Create everything (VPC + EKS + Flux bootstrap)
terraform apply

# Configure kubectl
aws eks update-kubeconfig --region us-west-2 --name gitops-demo

# Check Flux status
flux get all
```

### PR-to-Production Demo

1. **Verify app is running:**
   ```bash
   kubectl get pods -n demo-app
   kubectl get svc -n demo-app
   ```

2. **Get the LoadBalancer URL:**
   ```bash
   kubectl get svc demo-app -n demo-app -o jsonpath='{.status.loadBalancer.ingress[0].hostname}'
   ```

3. **Create a PR to update the app:**
   - Edit `apps/demo-app/configmap.yaml`
   - Change `Version: v1.0.0` to `Version: v2.0.0`
   - Open PR, review, merge

4. **Watch Flux reconcile:**
   ```bash
   flux get kustomizations --watch
   ```

5. **Refresh the browser** - the app now shows v2.0.0

### Drift Detection Demo

```bash
# Manually change something
kubectl scale deployment demo-app -n demo-app --replicas=5

# Watch Flux revert it (within 5 minutes or force reconcile)
flux reconcile kustomization apps

# Verify replicas are back to 2
kubectl get pods -n demo-app
```

### Cleanup

```bash
terraform destroy
```

## Repository Structure

```
gitops-flux-demo/
├── terraform/              # Single TF config for VPC + EKS + Flux
│   ├── main.tf            # VPC, EKS, Flux bootstrap
│   ├── locals.tf          # All configuration in one place
│   ├── providers.tf       # AWS, Kubernetes, Flux providers
│   ├── data.tf            # Data sources (EKS auth, 1Password)
│   └── outputs.tf         # Useful outputs
├── clusters/
│   └── gitops-demo/       # Flux sync target
│       ├── kustomization.yaml
│       ├── flux-system/   # Auto-generated by Flux bootstrap
│       └── apps/          # App Kustomizations
└── apps/
    └── demo-app/          # Sample application
        ├── namespace.yaml
        ├── deployment.yaml
        ├── service.yaml
        ├── configmap.yaml
        └── kustomization.yaml
```

## Resources

- [FluxCD Documentation](https://fluxcd.io/docs/)
- [Flux Terraform Provider](https://registry.terraform.io/providers/fluxcd/flux/latest/docs)
- [EKS Terraform Module](https://registry.terraform.io/modules/terraform-aws-modules/eks/aws/latest)
- [GitOps Principles](https://opengitops.dev/)

## Recording

Recording will be available after the talk.

## Feedback

Questions or feedback? Feel free to [open an issue](https://github.com/shankyjs/talks/issues) or reach out!

---

**Presented by**: [@shankyjs](https://github.com/shankyjs)
